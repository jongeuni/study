### Stateful Server

우선, 세션이란?

> 사용자로부터 들어오는 요구를 하나의 상태로 보고 그 상태를 일정하게 유지시키는 기술이다. 요청에 따른 정보를 서버에 저장한다.

클라이언트와의 통신 상태를 계속 추적하고 이를 서비스 제공에 이용하는 서버를 말한다.

> 상태란 과거의 동작 결과라고 할 수 있는데 (데이터의 송수신 및 처리) 서버의 현재 상태에 따라서 요청의 **응답이 달라질 수 있다.**

**장점**

- 클라이언트와 주고받을 메세지의 크기가 줄어든다.

**단점**

- 캐시 활용도가 떨어진다.

  [^Cache]: 자주 사용하는 데이터나 값을 미리 복사해 놓는 임시 장소

- 서버에 무리가 간다.

- REST API는 Stateless를 디향한다.

-  안정적이라고 할 수 없다.

  인터넷 환경은 패킷의 복사, 분실, 오류, 지연, 순서 바뀜 등이 발생할 가능성이 크다. 상태 정보는 과거의 정보이므로 틀린 상태 정보를 사용하게 될 수도 있다.



### Stateless Server

서버에서 작업을 하기 위해 상태 정보를 기억할 필요가 없다. 그저 들어온 요청에 대한 처리만 해주면 된다. (클라이언트로부터 도착한 명령문에만 의존한다.) 세션 관리는 클라이언트에게 책임이 있다.

> HTTP는 stateless한 프로토콜이다. 
>
> rest api는 http 프로토콜 상에 구현된 설계 구조이다. rest도 stateless한 성격을 가졌다.

**장점**

- Scaling이 자유롭다.

  서버 확장이 일어날 경우 (Scale out, 서버의 대수를 늘려 처리 능력을 향상 시키는 것이다.) **Stateful**이면 클라이언트의 세션 정보가 새로 scale out된 서버에 저장되어있지 않아 세션 정보를 옮겨주는 등 `부수적인 관리가 필요`하지만, **Stateless**일 경우 따로 관리하지 않아도 어떤 서버에 요청을 보내든 같은 결과를 얻을 수 있다.

**단점**

- 매 요청시마다 상태 정보를 전달해야 한다. 네트워크 리소스를 소비해야 한다.



### -

Stateful 서버는 클라이언트와 서버의 관계가 밀접하다. 클라이언트가 요청을 해도 저장되어있는 세션의 상태에 따라 응답이 다르게 간다. 둘이 연결되어있는 관계인 것이다.

Stateless 서버는 클라이언트의 요청에 대한 응답만을 준다. 서버는 그저 요청에 대한 응답을 하는 것이다. 상태와 상관 없이.